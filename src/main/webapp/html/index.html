<html ng-app="carExpertApp">
<head>
    <script src="resources/js/angular.js" type="text/javascript"></script>
    <script type="text/javascript">
        var carExpertApp = angular.module('carExpertApp', []);

        carExpertApp.factory("kbService", function($http) {
            function query(data) {
                return $http.post("/api/kb/", data, {
                    responseType: "json",
                    timeout: 10000
                })
            }

            return {
                query: query
            }
        });

        carExpertApp.controller('carExpertCtl', function ($scope, kbService) {
            $scope.answers = [];

            $scope.query = function(carDetails) {
                kbService.query(carDetails).success(function(data) {
                    $scope.answers = data;
                });
            };

        });


    </script>
</head>
<body ng-controller="carExpertCtl">

<form novalidate name="queryForm">
    Passengers: <input name="passenger" type="number" min="1" required ng-model="carDetails.passengers" /><br />
    Cargo: <input name="cargo" type="number" step="0.01" min="0" required ng-model="carDetails.cargo" /><br />
    <button ng-click="query(carDetails)" ng-disabled="queryForm.$invalid">Query</button>
</form>

<div ng-hide="answers.length">
    No car matches specified query
</div>

<div ng-repeat="answer in answers">
    <p>answer = {{answer.answer}}</p>
    <p>image = {{answer.imageUrl}}</p>
</div>
</body>
</html>